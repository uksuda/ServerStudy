syntax = "proto3";

option csharp_namespace = "network.main";

// import "common.proto";
import "types.proto";
import "unary.proto";
import "stream.proto";

package network.main;


service Main {
  rpc StreamOpen (stream StreamData) returns (stream StreamData);
  rpc UnaryDataSend (UnaryData) returns (UnaryData);
}

message StreamData {
  network.types.StreamPacket packet = 1;
  oneof data{
      network.stream.Stream_ConnectRes connect_res = 10;
      network.stream.Stream_Disconnected disconnected = 15;

      network.stream.Stream_UserConnect user_connect = 20;
      network.stream.Stream_UserDisconnect user_disconnect = 21;

      network.stream.Stream_MessageSend message_send = 30;
      network.stream.Stream_MessageRecv message_recv = 31;
  }
}

message UnaryData {
  network.types.UnaryDataType type = 1;
  oneof data {
      network.unary.Unary_JoinReq join_req = 10;
      network.unary.Unary_JoinRes join_res = 11;

      network.unary.Unary_CommandReq command_req = 20;
      network.unary.Unary_CommandRes command_res = 21;
  }
}